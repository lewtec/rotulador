## 2024-07-25 - Stored plain text passwords
**Vulnerability:** Passwords were being stored and checked in plaintext directly from the config file.
**Learning:** The application's `authenticationMiddleware` was performing a direct string comparison (`password == item.Password`), which is highly insecure. When implementing a breaking security change like this, it's crucial to provide a seamless migration path for existing users. My initial fix broke authentication for users with plaintext passwords. The corrected approach hashes plaintext passwords on the fly, logs a warning, and allows the application to continue functioning, which is a much better user experience.
**Prevention:** Always hash passwords using a strong, well-vetted algorithm like bcrypt before storing or comparing them. Never store plaintext credentials. When implementing breaking security changes, consider the user experience and provide a migration path or graceful handling of old configurations.

## 2026-01-19 - Path Traversal in Asset Handler
**Vulnerability:** The `/asset/` endpoint used `path.Join` with user-controlled input (via database) to construct file paths, allowing traversal outside the `images` directory if a malicious filename was inserted into the database.
**Learning:** `path.Join` only cleans logical paths but does not prevent traversal when applied to filesystem paths, especially if the base path is not strictly enforced. Relying on "safe" input from `info.Name()` during ingestion is not sufficient defense-in-depth, as the database content could be modified or malicious files with weird names could be ingested.
**Prevention:** Always use `filepath.Join` for filesystem paths and explicitly verify that the resolved path is within the expected directory (e.g., using `strings.HasPrefix(resolved, expectedDir + separator)`).
